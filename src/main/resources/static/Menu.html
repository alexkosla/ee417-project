<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Res Menu</title>
    <!-- css -->
    <link rel="stylesheet" href="css/Menu.css">
    <!-- bootstrap -->
    <link 
href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<body>
<section>
	<nav id="Navbar">
          <div class="logo">
              <img src="Images/italy-sticker-flag-logo-badge-travel-souvenir-illustration_669574-150.png">
          </div>

          <ul>
          
              <li><a href="home.html">Home</a></li>
              <li><a href="menu.html">Menu</a></li>
              <li><a href="orders.html">Orders</a></li>
              <li><a href="checkout.html">Checkout</a>					</li>
              <li><a href="#About us">About us</a></li>
          </ul>
          

          <div class="icon">
              <i class="fa-solid fa-magnifying-glass">				  </i>
              <i class="fa-solid fa-heart"></i>
              <i class="fa-solid fa-cart-shopping"></i>
          </div>
	</nav>
    <div class="container" style="max-width: 1000px;">
        <!-- Menu title -->
        <div class="menu-title text-center">
            <span>Our Menu</span>
        </div>
        <!-- catagories -->
        <div class="catagories text-center">
            <ul>
                <li>All</li>
                <li>Entrees</li>
                <li>Pasta</li>
                <li>Pizza</li>
                <li>Grill</li>
                <li>Dessert</li>
                <li>Alcohol</li>
                <li>Beverages</li>
            </ul>
        </div>

        <div class="row food-container">
            
                <!-- content div -->
            

           
           
           
        </div>
     <footer>  
        <div class="footer_main">

        <div class="footer_tag">
            <h2>Location</h2>
            <p>Dublin</p>
            <p>Donegal</p>
            <p>Cork</p>
            <p>Galway</p>
        </div>

        <div class="footer_tag">
            <h2>Quick Link</h2>
            <p>Home</p>
            <p>Menu</p>
            <p>Orders</p>
            <p>Checkout</p>
        </div>

        <div class="footer_tag">
            <h2>Contact</h2>
            <p>+12e3434</p>
            <p>+23443345345</p>
            <p>alisitalian@gmail.com</p>
        </div>

        <div class="footer_tag">
            <h2>Our Service</h2>
            <p>Fast Delivery</p>
            <p>Easy Payments</p>
            <p>24 x 7 Service</p>
        </div>

        <div class="footer_tag">
            <h2>Follow Us</h2>
            <i class="fa-brands fa-facebook-f"></i>
            <i class="fa-brands fa-twitter"></i>
            <i class="fa-brands fa-instagram"></i>
            <i class="fa-brands fa-linkedin-in"></i>
        </div>

    </div>
 </footer>
        

    </div> <!--Container ends here-->
<!-- custom script -->
<script src="script.js"></script>
<!-- bootstrap scripts -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
    fetch("http://localhost:8081/menu-items")
      .then(response => response.json())
      .then(data => populateMenu(data))
      .catch(error => console.error(error));
  });


function populateMenu(data) {

    let foodContainer = document.querySelector('.food-container');
const container = document.getElementById("gallery_grid");

foodContainer.innerHTML = "";

    const food = data.map(item => {
        console.log(item);
    const listitem = ` <div class="col-md-6 foodbox ${item.category}">
    <!-- content div -->
    <div class="content b my-2">
        <!-- image -->
        <div class="c-image">
            <img src="${item.pictureLocation}" alt="">
        </div>
        <div class="t-n-p my-2">
            <div class="header">  
                <!-- title -->
                <span class="title">${item.name}</span>
                <!-- price -->
                <span class="price"> €${item.price} ${item.calories} Calories</span>
            </div>
            <!-- Description -->
            <div class="des my-3 ">
                <p>${item.description}</p>
            </div>
            <!-- Add to Cart button and quantity button -->
            <!-- Add to Cart button and quantity button -->
            <div class="quantity">
                <input type="number" id="quantity1" name="quantity1" value="1" min="1" max="10">
                <div class="add-to-cart">
                    <button class="btn btn-primary add-to-cart-btn" onclick="addToCart('${item.name}','${item.category}','${item.pictureLocation}','${item.price}','${item.calories}','${item.description}')">Add to Cart </button>
                </div>
             </div>
        </div>   
    </div>
</div>`;

foodContainer.innerHTML += listitem;
})
}
async function addToCart(name,category,pictureLocation,price,calories,description){
    // let jsonItem = JSON.stringify(item);
    var currentdate = new Date(); 
    var datetime = currentdate.getDate() + "/"
                + (currentdate.getMonth()+1)  + "/" 
                + currentdate.getFullYear() + " "
                + currentdate.getHours() + ":"
                + currentdate.getMinutes() + ":" 
                + currentdate.getSeconds();

    const response = await fetch("http://localhost:8081/users/currentUser");
    const user = await response.json();
    console.log(user.id);

    let orderId;

    const res = await fetch("http://localhost:8081/orders/orderslist/user/" + user.id);
    const order = await res.json();

    if(order.length === 0){
        const ordersRes = await fetch("http://localhost:8081/orders/orderslist");
        const orders = await ordersRes.json();
        orderId = orders.length;
        console.log("if");

        console.log(orderId);
        
    }
    else{
        orderId = order[0].orderId;
        console.log("else");

        console.log(orderId);
        
    }
    
    

      
    let temp = {
    "orderId": parseInt(orderId),
    "items": [
    {
      "name": name,
      "quantity": 1,
      "price": parseInt(Math.round(price)),
      "calories": parseInt(calories),
      "pictureLocation": pictureLocation,
      "description": description,
      "category": category
    }
    ],
    "userId": user.id,
    "dateTime": datetime,
    "status": "OUT_FOR_DELIVERY",
    "address": user.address
  };
  
  fetch('http://localhost:8081/orders/post-order', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(temp)
    })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error(error));

}


const foodbox = document.querySelectorAll('.foodbox');
const menu = document.querySelectorAll('ul');
menu.forEach(m => {
    m.addEventListener('click', e=>{

        console.log(m);
        console.log(e);
        fetch("http://localhost:8081/menu-items-by-category?category=" + e.target.innerHTML)
      .then(response => response.json())
      .then(data => populateMenu(data))
      .catch(error => console.error(error));

                  
        })
        
    })


// </script>
// <script>
    // let foodContainer = document.querySelector('.food-container');

// const fooditem=[
// 	{
//         FoodName: "Brushetta",
//         foodimg: 'images/b1.jpg',
//         price: "$9.95 660Kcal",
//         type: "Entrees",
//         des: "Homemade basil pesto, pine nutsm parmesan cheese, olive oil & garilc with tomato served on fresh Italian bread"
//     },
//     {
//         FoodName: "Antipasta",
//         foodimg: 'images/b1.jpg',
//         price: "$11.95 720Kcal",
//         type: "Entrees",
//         des: "A selection of meats, cheese, olives sundried tomatoes, egg plant & roasted peepers, served with sour dough"
//     },
//     {
//         FoodName: "Garlic bread",
//         foodimg: 'images/b1.jpg',
//         price: "$9.95 700Kcal",
//         type: "Entrees",
//         des: "Fresh Garlic, mozzarella cheese, olive oil & oregano on fresh Italian bread"
//     },
//     {
//         FoodName: "Italian Salad",
//         foodimg: 'images/b1.jpg',
//         price: "$12.95 635Kcal",
//         type: "Entrees",
//         des: "Leattuce, tomato, cucumber,olives, red onion & pickled vegatables"
//     },
//     {
//         FoodName: "Panne Di Casa",
//         foodimg: 'images/b1.jpg',
//         price: "$12.95 635Kcal",
//         type: "Entrees",
//         des: "With olive oil, sea salts, balsamtic & fresh garlic"
//     },
//     {
//         FoodName: "Spagetti bolognase",
//         foodimg: 'images/b1.jpg',
//         price: "$14.95 940Kcal",
//         type: "Pasta",
//         des: "Spaghetti noodles and a meat-based sauce typically containing ground beef, tomatoes, onions, garlic, and herbs"
//     },
//     {
//         FoodName: "Linguine alle Vongole",
//         foodimg: 'images/b2.jpg',
//         price: "$14.95   849Kcal",
//         type: "Pasta",
//         des: "Pasta with clams, garlic, and white wine sauce"
//     },
//     {
//         FoodName: "Carboara",
//         foodimg: 'images/b2.jpg',
//         price: "$14.95   849Kcal",
//         type: "Pasta",
//         des: "Spaghetti that blends diced pork, eggs, cheese, and black pepper."
//     },
//     {
//         FoodName: "Vegitarian Carbonara",
//         foodimg: 'images/b3.jpg',
//         price: "$15.95",
//         type: "Pasta",
//         des: "Spaghetti pasta with courgettes, onions and pecorino cheese in a rich egg sauce."
//     },
//     {
//         FoodName: "Fettuccine alfredo",
//         foodimg: 'images/b3.jpg',
//         price: "$15.95",
//         type: "Pasta",
//         des: "Fresh or dried fettuccine tossed with butter and parmesan cheese until it emulsifies, creating a rich, creamy sauce."
//     },
//     {
//         FoodName: "Penne alla Arrabiata",
//         foodimg: 'images/b3.jpg',
//         price: "$15.95",
//         type: "Pasta",
//         des: "Pasta with spicy tomato sauce with a hint of basil and fresh herbs."
//     },
//     {
//         FoodName: "Pepporoni Pizza",
//         foodimg: 'images/l1.jpg',
//         price: "$16.95",
//         type: "Pizza",
//         des: "Tomato sauce, fior di latte mozzarella, parmesan, pepperoni, jalapeños, red onion"
//     },
//     {
//         FoodName: "Margarita Pizza",
//         foodimg: 'images/l2.jpg',
//         price: "$15.95",
//         type: "Pizza",
//         des: "Tomato sauce, fresh basil, fior di latte mozzarella, extra virgin olive oil"
//     },
//     {
//         FoodName: "Pizza Formaggi",
//         foodimg: 'images/l3.jpg',
//         price: "$16.95",
//         type: "Pizza",
//         des: "Mozzarella cheese, gorgonzola cheese, provolone cheese, parmigiano cheese."
//     },
//     {
//         FoodName: "Pizza Cotto E Funghi",
//         foodimg: 'images/l3.jpg',
//         price: "$16.95",
//         type: "Pizza",
//         des: "Mozzarella cheese, gorgonzola cheese, provolone cheese, parmigiano cheese."
//     },
//     {
//         FoodName: "Pizza Ortolana",
//         foodimg: 'images/l3.jpg',
//         price: "$14.95",
//         type: "Pizza",
//         des: "Mozzarella cheese, peppers, courgettes, aubergines, mushrooms, oil evo."
//     },
//     {
//         FoodName: "Pizza Napoli",
//         foodimg: 'images/l3.jpg',
//         price: "$13.90",
//         type: "Pizza",
//         des: "Tomato sauce, anchovies, cappers, olives, garlic, oregano."
//     },
//     {
//         FoodName: "16Oz Steak",
//         foodimg: 'images/l4.jpg',
//         price: "$25.00",
//         type: "Grill",
//         des: ""
//     },

//     {
//         FoodName: "Beef burger",
//         foodimg: 'images/s1.jpg',
//         price: "$21.00",
//         type: "Grill",
//         des: "Beef burger"
//     },
//     {
//         FoodName: "Chicken burger",
//         foodimg: 'images/s2.jpg',
//         price: "$20.00",
//         type: "Grill",
//         des: "Chicken burger"
//     },
//     {
//         FoodName: "Tiramisu",
//         foodimg: 'images/d1.jpg',
//         price: "$9.85",
//         type: "Desert",
//         des: "Classic Italian dessert with ladyfingers, mascarpone cheese, and coffee"
//     },
//     {
//         FoodName: "Cannoli",
//         foodimg: 'images/d1.jpg',
//         price: "$9.00",
//         type: "Desert",
//         des: "Crispy pastry shell filled with sweet ricotta cheese"
//     },

//     {
//         FoodName: "Gelato of the Day",
//         foodimg: 'images/d1.jpg',
//         price: "$9.95",
//         type: "Desert",
//         des: "Soft serverd classis Italian-style ice cream"
//     },

//     {
//         FoodName: "Chocolate brownie",
//         foodimg: 'images/d2.jpg',
//         price: "$9.95",
//         type: "Desert",
//         des: "Chocolate brownie"
//     },
//     {
//         FoodName: "House White",
//         foodimg: 'images/d2.jpg',
//         price: "$27",
//         type: "Wine and Beers",
//         des: "2016 Italian Pinot girgio"
//     },
//     {
//         FoodName: "Chardonnay",
//         foodimg: 'images/d2.jpg',
//         price: "$30",
//         type: "Wine and Beers",
//         des: "2016 Italian Antinort Chardonnay"
//     },
//     {
//         FoodName: "Sauvignon blanc",
//         foodimg: 'images/d2.jpg',
//         price: "$29",
//         type: "Wine and Beers",
//         des: "2013 Tenuta Maccan Sauvigon blanc"
//     },
//     {
//         FoodName: "House red ",
//         foodimg: 'images/d2.jpg',
//         price: "$27",
//         type: "Wine and Beers",
//         des: "2013 Italian Cabernet Sauvignon"
//     },
//     {
//         FoodName: "Pinot noir",
//         foodimg: 'images/d2.jpg',
//         price: "$32",
//         type: "Wine and Beers",
//         des: "2013 Brumale Vino Di Montepulciano"
//     },
//     {
//         FoodName: "Birra moretti 500mL",
//         foodimg: 'images/d2.jpg',
//         price: "$6.25",
//         type: "Wine and Beers",
//         des: ""
//     },
//     {
//         FoodName: "Guinness 500mL",
//         foodimg: 'images/d2.jpg',
//         price: "$5.25",
//         type: "Wine and Beers",
//         des: ""
//     },
//     {
//         FoodName: "Corona 330mL",
//         foodimg: 'images/d2.jpg',
//         price: "$5.10",
//         type: "Wine and Beers",
//         des: ""
//     },
//     {
//         FoodName: "Heineken 330mL",
//         foodimg: 'images/d2.jpg',
//         price: "$5.50",
//         type: "Wine and Beers",
//         des: ""
//     },
    
//     {
//         FoodName: "Coca Cola 335mL",
//         foodimg: 'images/d2.jpg',
//         price: "$3.50",
//         type: "Beverages",
//         des: ""
//     },
//     {
//         FoodName: "Diet Coca Cola 335mL",
//         foodimg: 'images/d2.jpg',
//         price: "$3.50",
//         type: "Beverages",
//         des: ""
//     },
//     {
//         FoodName: "Sprite",
//         foodimg: 'images/d2.jpg',
//         price: "$3.50",
//         type: "Beverages",
//         des: ""
//     },
//     {
//         FoodName: "Sprite Zero",
//         foodimg: 'images/d2.jpg',
//         price: "$3.50",
//         type: "Beverages",
//         des: ""
//     },
//     {
//         FoodName: "Fanta",
//         foodimg: 'images/d2.jpg',
//         price: "$3.50",
//         type: "Beverages",
//         des: ""
//     },
//     {
//         FoodName: "Water",
//         foodimg: 'images/d2.jpg',
//         price: "$3.00",
//         type: "Beverages",
//         des: ""
//     },
    
    
// ]


// const food = fooditem.map(item => {
//     const listitem = ` <div class="col-md-6 foodbox ${item.type}">
//     <!-- content div -->
//     <div class="content b my-2">
//         <!-- image -->
//         <div class="c-image">
//             <img src="${item.foodimg}" alt="">
//         </div>
//         <div class="t-n-p my-2">
//             <div class="header">  
//                 <!-- title -->
//                 <span class="title">${item.FoodName}</span>
//                 <!-- price -->
//                 <span class="price">${item.price}</span>
//             </div>
//             <!-- Description -->
//             <div class="des my-3 ">
//                 <p>${item.des}</p>
//             </div>
//             <!-- Add to Cart button and quantity button -->
//             <!-- Add to Cart button and quantity button -->
//             <div class="quantity">
//                 <input type="number" id="quantity1" name="quantity1" value="1" min="1" max="10">
//                 <div class="add-to-cart">
//                     <button class="btn btn-primary add-to-cart-btn">Add to Cart</button>
//                 </div>
//              </div>
//         </div>   
//     </div>
// </div>`;

// foodContainer.innerHTML += listitem;
// })
// const foodbox = document.querySelectorAll('.foodbox');
// const menu = document.querySelectorAll('ul');

// menu.forEach(m => {
//     m.addEventListener('click', e=>{
//         console.log(e.target.innerHTML)
//         foodbox.forEach(box => {
//             box.classList.add('d-none')
//             if(e.target.innerHTML === 'All')
//             {
//                 box.classList.remove('d-none')
//             }
//             else if(e.target.innerHTML==='Pastas'){
//                 if(box.classList.contains('Pasta'))
//                 {
//                     box.classList.remove('d-none')
//                 }
                
//             }
//             else if(e.target.innerHTML==='Pizzas'){
//                 if(box.classList.contains('Pizza'))
//                 {
//                     box.classList.remove('d-none')
//                 }
                
//             }
//             else if(e.target.innerHTML==='From the Grill'){
//                 if(box.classList.contains('Grill'))
//                 {
//                     box.classList.remove('d-none')
//                 }
                
//             }
//             else if(e.target.innerHTML==='Deserts'){
//                 if(box.classList.contains('Desert'))
//                 {
//                     box.classList.remove('d-none')
//                 }
//             }    
//             else if(e.target.innerHTML==='Entrees'){
//                 if(box.classList.contains('Entrees'))
//                 {
//                     box.classList.remove('d-none')
//                 }
//              }
             
//             else if(e.target.innerHTML==='Wine and Beers'){
//                 if(box.classList.contains('Wine and Beers'))
//                 {
//                     box.classList.remove('d-none')
//                 } 
//             }  
            
//             else if(e.target.innerHTML==='Beverages'){
//                 if(box.classList.contains('Beverages'))
//                 {
//                     box.classList.remove('d-none')
//                 }    
//             }
//         })
        
//     })
// })

// // Select all Add to Cart buttons
// const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');

// // Add click event listener to each button
// addToCartButtons.forEach(button => {
//   button.addEventListener('click', (event) => {
//     // Get the selected food item details
//     const foodItem = event.target.closest('.foodbox');
//     const foodName = foodItem.querySelector('.title').textContent;
//     const foodPrice = parseFloat(foodItem.querySelector('.price').textContent.replace('$', ''));
//     const foodQuantity = foodItem.querySelector('.quantity input').value;
//     const totalPrice = (foodPrice * foodQuantity).toFixed(2);

//     // Display the selected food item details and quantity in a popup
//     const popupMessage = `You added ${foodQuantity} ${foodName} for a total of $${totalPrice} to your cart.`;
//     alert(popupMessage);
//   });
// });



// </script>


<style>
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap');

:root{
    --golden : #c59d5f;
}
*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Open Sans', sans-serif;
}
.menu-title{
    margin-top: 3rem;
}
.menu-title{
    line-height:5;
}

.menu-title  span{
    font-size: 2rem;
    font-weight: 700;
    width: 10%;
    color: #182433;
    border-bottom: 5px solid var(--golden);
}
section{
  margin-top: 0rem}

section{
    width: 100%;
    height: 100vh;
}
section nav{
    display: flex;
    justify-content: space-around;
    align-items: center;
    position: fixed;
    right: 0;
    left: 0;
    background: white;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    z-index: 100;
}


section nav .logo img{
    width: 150px;
    cursor: pointer;
    margin: 4px 0;
}

section nav ul{
    list-style: none;
}

section nav ul li{
    display: inline-block;
    margin: 0 15px;
}

section nav ul li a{
    text-decoration: none;
    color: #000;
    font-weight: 500;
    font-size: 17px;
    transition: 0.1s;
}

section nav ul li a::after{
    content: '';
    
    width: 0;
    height: 3px;
    background: #fac031;
    display: block;
    transition: 0.2s linear;
}

section nav ul li a:hover::after{
    width: 100%;
}

section nav ul li a:hover{
    color: #fac031;
}

section nav .icon i{
    font-size: 18px;
    color: #000;
    margin: 0 5px;
    cursor: pointer;
    transition: 0.3s;
}

section nav .icon i:hover{
    color: #fac031;
}
.catagories ul {
    display: flex;
    list-style: none;
    justify-content: center;
    margin-top: 30px;
}
.catagories ul li {
    margin: 10px;
    padding: 5px 10px;
    font-size: 1rem;
    border: 2px solid var(--golden);
    border-radius: 5px;
    color: var(--golden)
}
.catagories ul li:hover{
    background-color: var(--golden);
    color: white;
}
/* content */
.content{
    display: flex;
    justify-content: center;
    align-items: center;
}
.content .c-image {
    width: 1000px;
    height: 160px;
    border: 3px solid var(--golden);
    border-radius: 5px;
}
.content .c-image img {
    width: 100%;
    height: 100%;
}
.content .t-n-p{
    margin-left: 20px;
    width: 1000px;
}
.content .t-n-p .header{
  display: flex;
  justify-content: space-between;
  border-bottom: 1px dotted #182433;
  padding: 0px 5px;
}
.content .t-n-p .title {
    font-size: 0.8rem;
    font-weight: 600;
    letter-spacing: 2px;
}
.content .t-n-p .price {
    font-size: 0.8rem;
    font-weight: 800;
    color: var(--golden);
    word-spacing: 2px;
}
.content .t-n-p .des p{
    font-size: 0.9rem;
}

/*Footer*/

footer{
    width: 100%;
    padding: 15px 0 0 12px;
    background: #eeeeee;
}

footer .footer_main{
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
}

footer .footer_main .footer_tag{
    text-align: center;
}

footer .footer_main .footer_tag h2{
    color: #000;
    margin-bottom: 15px;
    font-size: 17px;
}

footer .footer_main .footer_tag p{
    margin: 5px 0;
    font-size: 15px;
}

footer .footer_main .footer_tag i{
    margin: 0 3px;
    cursor: pointer;
}

footer .footer_main .footer_tag i:hover{
    color: #fac031;
}

footer .end{
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 15px;
}

footer .end span{
    color: #fac031;
    margin-left: 10px;
}

::-webkit-scrollbar{
    width: 13px;
}

::-webkit-scrollbar-track{
    border-radius: 15px;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
}

::-webkit-scrollbar-thumb{
    background: #fac031;
    border-radius: 15px;
}
.add-to-cart-btn {
  background-color: #4CAF50; /* Green */
  color: white;
  font-size: 16px;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

</style>
</body>
</html>
